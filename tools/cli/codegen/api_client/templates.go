package apiclient

const apiClientContent = `// This is an autogenerated file. DO NOT MODIFY
package {{ .packageName | ToLowerCase }} ${defineConstants}

{{ if .imports }} {{ range $index, $import := .imports }}
import "{{ $import }}" {{ end }} {{ end }}

type Client struct {
	client *client.Client 
	${addPropertiesToStruct}
	${addSubClientsToStruct}
}

func New(client *client.Client, {{ if $Properties }} {{ range $key, $value := $Properties}} {{ $value.name }} {{ $value.type }}, {{ end }} {{ end }}) *Client {
	return &Client{
		client: client,
		${addPropertiesToClientInitialisation}
		${addSubClientsToClientInitialisation}
	}
}
`

const defineConstants = `{{ $Properties := .properties }}`

const addPropertiesToStruct = `{{if $Properties}} {{range $key, $value := $Properties }}
	{{ $value.name }} {{ $value.type }} {{end}} {{end}}
`

const addPropertiesToClientInitialisation = `{{if $Properties}} {{range $key, $value := $Properties }}
	{{ $value.name }}: {{ $value.name }}, {{end}} {{end}}
`

const addSubClientsToStruct = `{{ if .subClients }} {{ range $index, $subClient := .subClients }}
	{{ $subClient.name | ToCamelCase }} {{ if .functionParams }} func({{ range $index, $functionParam := .functionParams }} {{ $functionParam.type }}, {{end}}) {{ end }} *{{ $subClient.name | ToSnakeCase }}.Client {{ end }} {{ end }}
`

const addSubClientsToClientInitialisation = `{{ if .subClients }} {{ range $index, $subClient := .subClients }}
	{{ $subClient.name | ToCamelCase }}: ${addSubClientPropertyDetails}, {{ end }} {{ end }}
`

const addSubClientPropertyDetails = `{{ if .functionParams }} ${addSubClientFunction} {{ else }} {{ $subClient.name | ToSnakeCase }}.New(client, ${addClientPropertiesToSubClientInitialisations}) {{ end }}`

const addSubClientFunction = `func({{ range $index, $functionParam := .functionParams }} {{ $functionParam.name }} {{ $functionParam.type }}, {{end}}) *{{ $subClient.name | ToSnakeCase }}.Client { return {{ $subClient.name | ToSnakeCase }}.New(client, ${addClientPropertiesToSubClientInitialisations} {{ range $index, $functionParam := .functionParams }} {{ $functionParam.name }}, {{ end }}) }`

const addClientPropertiesToSubClientInitialisations = `{{if $Properties}} {{range $key, $value := $Properties }} {{ $value.name }}, {{end}} {{end}}`
